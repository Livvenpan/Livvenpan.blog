---
layout: page
title: 触发器编辑器
date: 2025-09-14
tags: [游戏开发, 触发器, 编辑器, 技术文档]
excerpt: 详细介绍触发器编辑器的功能和使用方法，包括流程节点、值节点、行为节点和事件节点的分类说明。
---

# 触发器编辑器

## 描述：

在之前的机制开发过程中发现,大部分的机制都可以归纳为以下3部分:
1、注册事件,接收回调 2、进行逻辑判断筛选 3、执行对应逻辑
其中这每一部分都有很大的复用性,但是各种排列组合,导致实际的机制复用性非常差
尤其是逻辑判断筛选部分,每增加一小个功能点就需要重新开发
策划在设计技能后没有办法快速去验证,得等程序去增加功能能,而程序排期往往会不允许策划进行试
错。
触发器可以预先做好相应的逻辑,策划可以提前提出逻辑需习求,逻辑不依赖于具体的某一个技能,以
后都能用。

## 分类：

### 流程节点

#### 1.If节点 IfElse

##### 节点功能

判断Bool值真假

#### 2.ForEach循环IdInt ForEachIdInt

##### 节点功能

ForEach循环遍历IdInt型的列表，需要提供一个<ListIdInt>。
循环过程中会多次触发循环执行，每次触发的当前值和当前索引都会变化。

#### 3.ForEach循环Int ForEachInt

##### 节点功能

ForEach循环遍历Int型的列表，需要提供一个<ListInt>。
循环过程中会多次触发循环执行，每次触发的当前值和当前索引都会变化。

#### 4.For循环 ForLoop

##### 节点功能

For循环一定次数，用于执行重复逻辑。 例一： 起始索引 = 1 结束索引 = 6 增量 = 2
逆序 = FALSE 第一次：当前索引 = 1 触发一次循环执行 第二次：当前索引 = 3
触发一次循环执行 第三次：当前索引 = 5 触发一次循环执行 触发一次结束执行 例二：
起始索引 = 1 结束索引 = 9 增量 = 2 逆序 = TRUE 第一次：当前索引 = 8
触发一次循环执行 第二次：当前索引 = 6 触发一次循环执行 第三次：当前索引 = 4
触发一次循环执行 第四次：当前索引 = 2 触发一次循环执行 触发一次结束执行

#### 5.SwitchCase节点 SwitchCase

##### 节点功能

根据输入的判断值，和case列表，执行相应的输出流。 例如下图的情况：
如果判断值等于0，则执行第1个case节点 如果判断值等于2，则执行第2个case节点
如果判断值等于3，则执行第3个case节点
如果判断值在以上三个值之外，则执行其他情况节点

### 值节点

#### 1.比较运算符Int CompareInt

##### 节点功能

对两个Int类型数值根据设定的比较运算符进行比较

#### 2.获取黑板值Bool GetBlackBoardTypeBool

##### 节点功能

获取Bool类型的黑板值

#### 3.获取黑板值IdInt GetBlackBoardTypeIdInt

##### 节点功能

获取IdInt类型的黑板值

#### 4.获取黑板值Int GetBlackBoardTypeInt

##### 节点功能

获取Int类型的黑板值，黑板中10000代表实际值为1

#### 5.获取黑板值ListIdInt GetBlackBoardTypeListIdInt

##### 节点功能

获取ListIdInt类型的黑板值

#### 6.获取黑板值ListInt GetBlackBoardTypeListInt

##### 节点功能

获取ListInt类型的黑板值，黑板中列表里10000代表实际值为1

#### 7.获取黑板值String GetBlackBoardTypeString

##### 节点功能

获取String类型的黑板值

#### 8.获取技能是否在CD GetSkillOnCD

##### 节点功能

获取自身指定的技能是否在CD中

#### 9.获取怪物数量(通过怪物表Id) GetCountByMonsterId

##### 节点功能

获取当前房间指定怪物表Id的怪物数量

#### 10.四则运算 Arithmetic

##### 节点功能

对两数进行指定的四则运算

#### 11.获取当前抓取目标数量 GetGrabCount

##### 节点功能

获取指定实体当前抓取目标数量

#### 12.设置技能片段枚举 SetSkillClipEnum

##### 节点功能

设置一个你想要的技能片段枚举

#### 13.获取当前技能片段Id GetSkillClipId

##### 节点功能

获取指定实体目标的当前技能片段Id

#### 14.获取当前朝向 GetFace

##### 节点功能

获取指定实体的当前朝向

#### 15.逻辑运算符 LogicalOperator

##### 节点功能

对两数进行指定的逻辑运算

#### 16.设置朝向枚举 SetFaceEnum

##### 节点功能

设置一个你想要的朝向枚举

#### 17.获取随机数 GetRandom

##### 节点功能

根据指定的范围（全闭区间），获取一个随机数的数字

#### 18.获取单位类型 GetUnitType

##### 节点功能

获取指定的目标的单位类型

#### 19.获取怪物种族 GetMonsterRace

##### 节点功能

获取指定的目标的怪物种族

#### 20.设置单位类型枚举 SetUnitTypeEnum

##### 节点功能

设置一个你想要的单位类型枚举

#### 21.设置怪物种族枚举 SetMonsterRaceEnum

##### 节点功能

设置一个你想要的怪物种族枚举

#### 22.获取Buff数量 GetBuffCount

##### 节点功能

获取指定实体的指定Buff表Id的Buff数量

#### 23.获取目标选择配置结果 GetSelectTarget

##### 节点功能

对指定实体使用指定目标选择配置，获取选择目标结果

#### 24.列表添加元素 ListAddElement

##### 节点功能

给列表添加一个元素

#### 25.列表减少元素 ListRemoveElement

##### 节点功能

给列表减少一个元素，只会减少一个，有多个匹配则减少第一个

#### 26.列表判断包含 ListContains

##### 节点功能

判断列表是否包含指定元素

#### 27.获取距离 GetTargetDistance

##### 节点功能

获取两个实体的距离

#### 28.获取是否携带指定Buff GetHasBuff

##### 节点功能

获取指定实体是否携带指定Buff

#### 29.获取是否携带指定BuffInfo GetHasBuffInfo

##### 节点功能

获取目标是否携带指定BuffInfo

#### 30.获取玩家关系 GetPlayerRelationType

##### 节点功能

获取两个实体的关系

#### 31.设置Buff状态枚举 SetBuffStateTypeEnum

##### 节点功能

设置你想要的Buff状态枚举

#### 32.获取是否有指定Buff状态 GetHasBuffState

##### 节点功能

获取是否有指定Buff状态，buff状态指的是Buff表中StateChange赋予的状态。多个状态可同时存在，以二进制位的形式储存。

#### 33.获取血量 GetHP

##### 节点功能

获取目标实体当前血量信息 获取失败时输出参数都是0

#### 34.获取宠物宿主 GetPetBelongEntity

##### 节点功能

获取指定宠物目标的宿主

#### 35.比较运算符IdInt CompareIdInt

##### 节点功能

对两个IdInt类型数值根据设定的比较运算符进行比较

#### 36.获取目标指定技能等级 GetSkillLevel

##### 节点功能

获取目标指定技能等级

#### 37.获取键值对 GetKeyValue

##### 节点功能

获取键值对中指定键的当前值

#### 38.键值对是否存在 HasKeyValue

##### 节点功能

获取键值对中指定键的当前值

#### 39.设置属性枚举 SetPropertyTypeEnum

##### 节点功能

输出一个属性类型枚举，对应代码中的PropertyTypeId（注意，如果增减属性，编辑器这边需要同步修改）

#### 40.获取单位属性 GetProperty

##### 节点功能

获取单位对应propertyTypeId的属性值，获取的值是定点数。
如果目标不存在或者目标没有这个属性，则输出都是0
属性的使用值就是在最终值的基础上判断一下上下限，如果高于上限或者低于下限则取上限/下限

#### 41.获取当前游戏帧 GetFrame

##### 节点功能

获取当前游戏帧，可以获取系统帧和战斗帧

#### 42.获取单位是否已经死亡 UnitIsDead

##### 节点功能

获取单位是否已经死亡

#### 43.整除 Division

##### 节点功能

整除，获取商和余数

#### 44.字符串是否相等 StringEqual

##### 节点功能

判断两个字符串是否内容相同

#### 45.列表获取指定索引值 ListGetElement

##### 节点功能

列表获取在指定索引的值

#### 46.列表获取长度 ListGetLength

##### 节点功能

列表获取长度

#### 47.获取蓝量 GetMP

##### 节点功能

获取目标实体当前蓝量信息 获取失败时输出参数都是0

#### 48.取最大，最小值 MaxMin

##### 节点功能

输出2个输入中最大，最小的数

#### 49.获取当前脚本UId GetFlowUId

##### 节点功能

获取当前脚本的UId

#### 50.获取自身 GetSelfEntity

##### 节点功能

获取当前脚本挂载的目标

#### 51.获取技能是否可释放 GetSkillCanUse

##### 节点功能

获取指定Id的技能是否可释放

#### 52.判定技能分类 GetSkillEffectTag

##### 节点功能

判定指定Id的技能是否为某个技能分类，分类参考技能表

![image-20250914201952489](E:\work\project\Livvenpan.blog\触发器编辑器\image-20250914201952489.png)

#### 53.获取玩家 GetPlayerEntityId

##### 节点功能

根据座位号获取玩家唯一ID，座位号从1开始

#### 54.获取职业特殊值 GetHeroSp

##### 节点功能

获取目标实体当前职业特殊值信息 获取失败时输出参数都是0

#### 55.获取当前技能片段帧数 GetSkillClipFrame

##### 节点功能

获取指定实体目标的当前技能片段帧数

#### 56.获取单位所在区域ID GetUnitInAreaId

##### 节点功能

获取玩家所在区域的ID，区域为房间配置中的触发区域ID

#### 57.获取单位坐标 GetUnitPosition

##### 节点功能

获取指定单位的坐标，分别输出X轴和Z轴坐标。

#### 58.列表乱序 ListShuffle

##### 节点功能

将一个给定的IdInt型列表进行乱序并输出，可单独获取列表首位元素。

#### 59.获取秘境兵种 GetSecretRealmMonsterList

##### 节点功能

获取秘境当前关卡对应的兵种列表，兵种信息由服务器在战前数据中下发。

#### 60.获取秘境词缀 GetSecretRealmAffixBuffInfoList

##### 节点功能

获取秘境当前关卡对应的词缀BuffInfo列表。

#### 61.获取目标是否为另一目标祖宗 IsBelongEntity

##### 节点功能

获取秘境当前关卡对应的词缀BuffInfo列表。

#### 62.获取单位方向键 GetMoveJoystickState

##### 节点功能

获取指定单位的方向键状态（左摇杆状态）

#### 63.转换 Int 到 IdInt

##### 节点功能

将 FixNumber 转成 number

#### 64.转换 IdInt 到 Int

##### 节点功能

将 number 转成 FixNumber

### 行为节点

#### 1.击杀单位 EntityKill

##### 节点功能

杀死目标单位，目标会正常触发死亡相关逻辑，无视锁血

#### 2.抹除单位 EntityRemove

##### 节点功能

从游戏中抹除单位，会移除单位的触发器，buff等，不会播放死亡动画，不会触发单位死亡触发器，死亡buff，不会给服务器发送杀死单位协议，不会被统计进入击杀数量

#### 3.显示虚假飘字 PopFakeText

##### 节点功能

弹出虚假飘字，飘字数值最大999999

#### 4.设置黑板值Bool SetBlackBoardTypeBool

##### 节点功能

设置Bool类型的黑板值

#### 5.设置黑板值IdInt SetBlackBoardTypeIdInt

##### 节点功能

设置IdInt类型的黑板值

#### 6.设置黑板值Int SetBlackBoardTypeInt

##### 节点功能

设置Int类型的黑板值，实际值1设置到黑板中是10000

#### 7.设置黑板值ListIdInt SetBlackBoardTypeListIdInt

##### 节点功能

设置ListIdInt类型的黑板值

#### 8.设置黑板值ListInt SetBlackBoardTypeListInt

##### 节点功能

设置ListInt类型的黑板值

#### 9.设置黑板值String SetBlackBoardTypeString

##### 节点功能

设置String类型的黑板值

#### 10.添加Buff BuffAdd

##### 节点功能

给指定目标添加Buff，支持添加单个和多个

#### 11.添加BuffInfo BuffInfoAdd

##### 节点功能

给指定目标添加BuffInfo，支持添加单个和多个

输入参数$(目标)是添加BuffInfo的单位，不一定是触发后添加Buff的单位

#### 12.删除Buff BuffRemove

##### 节点功能

对指定目标删除Buff，支持删除单个和多个

#### 13.删除BuffInfo BuffInfoRemove

##### 节点功能

对指定目标删除BuffInfo，支持删除单个和多个

#### 14.添加脚本 FlowAdd

##### 节点功能

给指定目标添加触发器脚本，可填脚本参数

#### 15.删除脚本 FlowRemove

##### 节点功能

对指定目标删除脚本，支持删除单个和多个

#### 16.切换技能 ChangeSkill

##### 节点功能

对指定目标切换技能

#### 17.设置键值对 SetKeyValue

##### 节点功能

设置键值对

#### 18.设置属性 SetProperty

##### 节点功能

修改属性，被修改的属性不能是元素攻击类型
如果在节点运行之前获取输出参数，得到的是修改之前的属性

#### 19.黑板值自增IdInt IncreaseBlackBoardTypeIdInt

##### 节点功能

IdInt类型的黑板值自增，可自定义增量，该功能主要用于计数以及数组的下标操作。

#### 20.播放场景特效 PlayRoomEffect

##### 节点功能

房间场景中可以添加特效单位并且设置组ID。
该节点用于播放指定组ID的特效，只有勾选了分组播放的特效适用。

#### 21.删除场景特效 RemoveRoomEffect

##### 节点功能

房间场景中可以添加特效单位并且设置组ID。
该节点用于删除指定组ID的特效，没有勾选分组播放的也可删除，特效组Id为0也可删除。

#### 22.单位移动 UnitMove

##### 节点功能

控制指定单位移动到某处，可以是移动相对位置，也可以是移动到某个坐标，该节点通过AI指令实现，控制移动的单位必须要有AI组件，由于玩家默认情况下没有AI组件，所以只能在开启黑幕做表演的时候控制玩家移动，这个时候是会给玩家添加AI组件的。

#### 23.相机移动 CameraOffset

##### 节点功能

控制相机按照相对位置移动，可以控制移动过程持续的时间。

#### 24.相机恢复 CameraReset

##### 节点功能

控制相机恢复到上次位移的位置，可以控制移动过程持续的时间。

#### 25.场景切换 ChangeScene

##### 节点功能

切换到指定序号的场景，关联房间配置中的多场景列表。

#### 26.开启黑幕 BlackScreenShow

##### 节点功能

开启黑幕UI，同时暂停响应玩家的输入，并且将场上所有单位的当前AI指令停止，给没有AI组件的单位临时添加上AI组件，开启后将会一直持续黑幕状态。
黑幕功能主要用于剧情表演。

#### 27.关闭黑幕 BlackScreenHide

##### 节点功能

关闭黑幕UI，开始接受玩家输入，并且将场上所有单位的当前AI指令停止，不会移除单位的AI组件。
黑幕功能主要用于剧情表演。

#### 28.开启战斗引导 SetBattleTips

##### 节点功能

开启战斗引导，关联BattleTips表。
当执行到该节点时，逻辑会停在这里，直到持续时间结束，再执行下一个节点。

#### 29.设置朝向 SetFace

##### 节点功能

设置单位朝向左或右。

#### 30.锁定职业特殊值 LockRoleSp

##### 节点功能

锁定职业特殊值，不允许增减。

#### 31.修改 Buff 持续帧数 ModifyBuffTime

##### 节点功能

修改 Buff 的持续帧数

#### 32.设置AI目标 SetAITarget

##### 节点功能

指定单位设置AI目标，目标填-1表示清除AI目标。

#### 33.设置挂点挂件显隐 SetJoinVisible

##### 节点功能

设置模型挂点隐藏

#### 34.锁血 LockBlood

##### 节点功能

设置实体锁血

#### 35.切换房间区域 ChangeArea

##### 节点功能

根据房间配置中的区域序号切换房间区域，切换的内容包括行走范围、阻挡信息、相机范围、相机大小等。

#### 36.设置单位是否可区域传送 FsDetailSetEnableAreaTransfer

##### 节点功能

在秘境中，设置一个单位是否可以通过区域传送门进行传送。
配合房间编辑器的区域传送门使用。

#### 37.单位冲锋 UnitTrack

##### 节点功能

向一个指定目标执行冲锋逻辑（2DTrack实现）
根据目标位置和移动时间，计算出X轴和Z轴的速度分量 可以填目标点的X轴和Z轴偏移
冲锋到一定距离内可提前停止 可设置冲锋过程中无视阻挡 冲锋过程中不会被AI指令打断

#### 38.设置单位坐标 SetUnitPosition

##### 节点功能

将指定单位设置到目标位置（X轴和Z轴坐标）
如果目标没有无视阻挡能力，则会被设置到最近的没有阻挡的位置

#### 39.设置区域小地图标志 SetAreaMapItem

##### 节点功能

设置秘境的某个区域在小地图的特殊标志，需要策划自己控制开启和关闭。 输入参数

#### 40.设置军势值 SetSecretWarValue

##### 节点功能

设置秘境军势值进度（0~100）以及对应显示的伤害加成值，仅显示用无任何逻辑。

#### 41.设置区域小地图颜色 SetAreaMapItemColor

##### 节点功能

设置秘境小地图区域的颜色，目前仅绿色生效，红色效果已去除。

#### 42.设置秘境提示 SetSecretTips

##### 节点功能

设置秘境大图提示信息。

#### 43.设置职业特殊值UI SetRoleSp

##### 节点功能

设置目标职业特殊值UI是否显示 设置目标职业特殊值UI倒计时

#### 44.修改实体运行速度 ModifyFrameSpeed

##### 节点功能

设置目标 CFrame 速度

#### 45.设置技能隐藏 SetSkillHide

##### 节点功能

设置目标技能隐藏，在 UI 上不显示。

#### 46.自定义事件 CustomEvent

##### 节点功能

派发自定义事件，由策划和程序商定事件用途以及参数含义，可按需扩展参数类型。

#### 47.设置3D追踪 Set3DTrack

##### 节点功能

给追踪者设置3D追踪组件，能持续追踪目标单位移动，在追踪限时内一定能追到目标。

#### 48.召唤 Summon

##### 节点功能

召唤单位，功能和召唤表一致 召唤参数在节点面板进行配置
直接通过怪物表进行召唤，不需要填召唤表Id
怪物属性修正还是可以通过SummonProperty表进行配置，Id对应怪物表Id
通过编辑器召唤的单位，需要在召唤该单位的角色配置文件中提前设置好！！！

### 事件节点

#### 1.添加Buff时 OnBuffAdd

##### 节点功能

触发器挂载目标添加buff时，触发一次 支持单目标和全局

#### 2.攻击命中时(派发给宿主) OnAttack2Belong

##### 节点功能

单位攻击命中时，触发事件，该事件会派发给攻击单位的父节点，比如人发射的子弹命中目标，这个事件会发送给人而不是子弹
该节点有明确的目标，只能是单体事件

#### 3.攻击命中时(派发给自己) OnAttack2Self

##### 节点功能

单位攻击命中时，触发事件，该事件会派发给攻击单位，比如人发射的子弹命中目标，这个事件会发送给子弹
该节点有明确的目标，只能是单体事件

#### 4.技能释放时 OnSkillCast

##### 节点功能

技能释放成功时，会触发一次，多段技能只会在第一段释放成功时触发 支持单目标和全局

#### 5.切换技能片段时 OnClipChange

##### 节点功能

该事件会在切换技能片段(动作)时触发一次 支持单目标和全局

#### 6.切换房间时 OnRoomChange

##### 节点功能

当玩家切换房间时触发一次 该事件是全局事件

#### 7.动作播放完时 OnClipFinish

##### 节点功能

动作播放到最后一帧要切换动作时，触发这个事件 支持单目标和全局

#### 8.连击次数改变时(派发给宿主) OnAttackComboChange

##### 节点功能

该事件会在自身连击数增加时，触发一次 支持单目标和全局

#### 9.生成召唤物时 OnSummonCreate

##### 节点功能

该事件会在生成召唤物时，触发一次 该事件是全局事件

#### 10.暴击攻击时(派发给宿主和自身) OnAttackCritical

##### 节点功能

当发生暴击时攻击者和宿主（如果有的话）各触发一次事件 支持单目标和全局

#### 11.脚本结束时 OnFlowDestroy

##### 节点功能

触发器脚本删除时，触发一次

#### 12.技能CD开始时 OnSkillCDStart

##### 节点功能

技能cd开始时触发一次，注意：充能技能不会触发这个事件 支持单目标和全局

#### 13.技能CD结束时 OnSkillCDEnd

##### 节点功能

技能cd结束时触发一次，注意：充能技能不会触发这个事件 支持单目标和全局

#### 14.进入触发区域时 OnAreaEnter

##### 节点功能

进入触发区域时，触发事件，注意，触发区域不能悬空，且触发区域值必须在添加触发器时就能够获取到
该事件只能挂载在对应Id区域，不支持全局

#### 15.被击时 OnHit

##### 节点功能

单位攻击命中时，触发事件，该事件会派发给受击单位 支持单目标和全局

#### 16.杀死单位时 OnKill

##### 节点功能

当单位死亡时，给最后伤害来源发送事件 如果是召唤物死亡，也会给宿主发送该事件
支持单目标和全局

#### 17.离开触发区域 OnAreaLeave

##### 节点功能

单位离开触发区域时会触发事件，注意，触发区域不能悬空，且触发区域值必须在添加触发器时就能够获取到
该事件只能挂载在对应Id区域，不支持全局

#### 18.怪物出生时 OnMonsterBirth

##### 节点功能

怪物创建时触发事件，不包含召唤物 该事件是全局事件

#### 19.怪物死亡时 OnMonsterDead

##### 节点功能

怪物死亡时（得落地移除前，并非血量到0时）触发一次 该事件是全局事件

#### 20.移动时 OnMove

##### 节点功能

当单位X或者Z坐标有变化时，触发该事件 该事件只能挂载单体

#### 21.删除Buff时 OnBuffRemove

##### 节点功能

触发器挂载目标删除buff时，触发一次 支持单目标和全局

#### 22.技能打断时 OnSkillBreak

##### 节点功能

技能在玩家被抓取或者自己释放其他技能等原因打断时会触发该事件，如果是被动打断技能，打断动作Id会是EnumSkillType.None
支持单目标和全局

#### 23.技能取消时 OnSkillCancel

##### 节点功能

玩家点击取消按键结束技能或者开关技能因为条件不符合而自动关闭时会触发这个事件
支持单目标和全局

#### 24.按键点击时 OnSkillClick

##### 节点功能

该事件会在按键按下时，触发一次。一些特殊功能（比如预输入）造成的按键按下也会触发该事件
支持单目标和全局

#### 25.脚本开始时 OnFlowStart

##### 节点功能

该事件只会在脚本开始时，触发一次，注意，脚本添加后不会立刻触发该事件，要到第一次运行到脚本系统才会进行初始化

#### 26.脚本运行时 OnFlowUpdate

##### 节点功能

脚本每隔tickFrame个系统帧执行一次，加上后第一次运行会执行一次

#### 27.键值对变化时 OnKeyValueChange

##### 节点功能

键值对变化时 第一次设置时，$(修改前)和$(当前值)相等

#### 28.子弹创建时 OnBulletCreate

##### 节点功能

子弹创建时触发事件 该事件是全局事件

#### 29.属性平衡专用 OnAttributeBalance

##### 节点功能

当有属性发生变化时，用于属性属性平衡的专用事件，在一切其他事件属性修改之前
该事件可以是单体也可以是全局

#### 30.玩家复活时 OnRebornFinish

##### 节点功能

玩家单位复活时触发事件 仅支持全局

#### 31.攻击命中触发框时(派发给自己) onAttackOnlyEventToSelf

##### 节点功能

单位攻击命中触发框时，触发事件，该事件会派发给攻击单位，比如人发射的子弹命中目标，这个事件会发送给子弹

#### 32.攻击命中触发框时(派发给宿主) onAttackOnlyEventToOwner

##### 节点功能

单位攻击命中触发框时，触发事件，该事件会派发给攻击单位的父节点，比如人发射的子弹命中目标，这个事件会发送给人而不是子弹
该节点有明确的目标，只能是单体事件

#### 33.被击中触发框时 onHitOnlyEvent

##### 节点功能

单位攻击命中时，触发事件，该事件会派发给受击单位
